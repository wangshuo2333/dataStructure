### 栈的作用与应用

- 栈的引入简化了程序设计的问题，划分了不同关注的层次，使得思考范围缩小，更加聚焦与我们要解决的问题核心。反之，像数组等，因为要分散精力去考虑数组的下标增减等细节问题，反而掩盖了问题的本质。

#### 栈的应用

- 递归
> 把一个直接调用自己或通过一系列的调用语句间接地调用自己的函数，称为递归函数
> 递归和迭代的区别是：迭代使用的时循环结构，递归使用的是选择结构。递归能使程序的结构更清晰、更简洁、更容易让人理解，从而减少读懂代码的时间。但是大量的递归调用会建立函数的副本，会耗费大量的时间和内存。迭代则不需要反复调用函数和占用额外的内存。因此应该视不同情况选择不同的代码实现方式。
> 前面已经看到递归是如何执行它的前行和后退阶段的。递归过程退回的顺序是它前行顺序的逆序。在退回过程中，可能要执行某些动作，包括恢复在前行过程中存储起来的某些数据。
> 这种存储某些数据，并在后面又以存储的逆序恢复这些数据，以供之后使用的需求，显然很符合栈这样的数据结构，因此，编辑器使用栈实现递归。
> 简单的说，就是在前行阶段，对于每一个递归，函数的局部变量、参数值以及返回地址都被压入栈中。在退回阶段，位于栈顶的局部变量、参数值和返回地址被弹出，用于返回调用层析中执行代码的其余部分，也就是恢复了调用的状态。
> 当然对于现在的高级语言，这样的递归问题是不需要用户管理这个栈的。

- 四则表达式
> 如何用C语言或其他语言实现对数学表达式的求值“9+（3-1）* 10 ÷ 2”

> 这里的困难就在于惩处在加减的后面，却要先运算，而加入了括号后，就变得更加复杂
> 但仔细观察后发现，括号都是成对出现的，有左括号就一定会有右括号，对于多重括号，最终也是完全嵌套匹配的。这用栈结构正好合适，只要碰到左括号，就将此左括号进栈，不管表达式有多少重括号，反正遇到左括号就进栈，而后面出现右括号时，就让栈顶的左括号出栈，期间让数学运算，这样，最终会有括号的表达式从左到右巡查一遍，栈应该是由空到有元素，最终再因全部匹配成功后成为空栈的结果。

- 中缀表达式转后缀表达式
> 我们把平时所用的标准四则运算表达式，即9+（3+1）×3+1÷2叫做中缀表达式。因为所有的运算符号都在两数字的中间
> 规则： 从左到右遍历中缀表达式的没个数字和符号，若是数字就输出，即成为后缀 表达式的一部分；若果是符号，则判断其余栈顶符号的优先级，是右括号或优先级低于栈顶符号（乘除优先加减）则栈顶元素依次出栈并输出，并将其当前符号进栈，一直到最终输出后缀表达式位置。

1. 初始化一空栈，用来对符号进出栈使用
![enter description here][1]

2. 第一个字符是数字9，输出9，后面是符号＋，进栈，如图4-9-7的右图所示。
3. 第三个字符是（，依然是符号，因其只是左括号，还未配对，故进栈。 如图4-7-9的左图所示
4. 第四个字符是数字3，输出，总表达式为 9 3 ，接着是- ，进栈。如图4-7-9的右图所示
![enter description here][2] 

5. 接下来是数字1，输出，总表达式为 9 3 1，后面是符号），此时，我们需要匹配此前的（，所以栈顶依次出栈，并输出，直到 （出栈位置。此时左括号上方只有- ，因此输出- 。总的输出表达式为9 3 1 - 。如图4-9-8的左图所示。
6. 接着是数字3，输出，总的表达式为9 3 1 - 3 。紧接着是符号×，因为此时的栈顶符号为+号，优先级低于×，因此不输出，×进栈。如图4-9-8的右图所示
![enter description here][3]

7. 之后是符号+，此时栈顶元素×比这个+优先级高，因此栈中元素出栈并输出（没有比+号更低的优先级，所以全部出栈），总输出表达式为9 3 1 - 3 * +。 然后将当前这个符号+进栈。也就是说，前6张图的栈底的+是指中缀表达式中开头的9后面那个+，而图4-9-9左图中的栈底（也是栈顶）的+是指 9+（3-1）+中的最后一个+
8. 紧接着数字10，输出，总表达式为 9 3 1 - 3 * + 10。后是符号÷，所以÷进栈，如图4-9-9的右图所示。
![enter description here][4]

9. 最后一个数字2，输出，总的表达式9 3 1 - 3 * + 10 2.如图4-9-10的左图所示。
10. 因已经到最后，所以讲栈中符号全部出栈并输出。最终输出的后缀表达式结果为9 3 1 - 3 * + 10 2 / + 。如图4-9-10的右图所示
![enter description here][5]

> 想要计算机具有处理通常标准（中缀）表达式的能力，最重要的就是两步：
> 1. 将中缀表达式转化为后缀表达式（栈用来进出运算的符号）
> 2. 将后缀表达式进行运算得出结果（栈用来进出运算的数字）

- 后缀表达式
> 一种不需要括号的后缀表达法，也称为逆波兰（Reverse Polish Notation，RPN）表示。
> 对于“9+（3+1）×3+10÷2”这种中缀表达式，如果用后缀表达法应该是“9 3 1 - 3 × + 10 2 ÷ ＋”
> 1. 3 - 1 = 2 剩下 9 2 3 ×+ 10  2 ÷ +
> 2. 2 x 3 = 6 剩下9 6 + 10 2 ÷ +
> 3. 9 + 6 = 15 剩下 15 10  2 ÷ +
> 4. 10 ÷ 2 = 5 剩下 15 5  +
> 5.  15 + 5  = 20 
![enter description here][6]
![enter description here][7]
![enter description here][8]
![enter description here][9]


  [1]: ./images/1510562186747.jpg
  [2]: ./images/1510562366859.jpg
  [3]: ./images/1510562575799.jpg
  [4]: ./images/1510562862096.jpg
  [5]: ./images/1510562989779.jpg
  [6]: ./images/1510642136339.jpg
  [7]: ./images/1510642149884.jpg
  [8]: ./images/1510642162549.jpg
  [9]: ./images/1510642183423.jpg